# 1장. 웹 브라우저 
## 탐험 경유지
```text
1. HTTP 리퀘스트 메시지를 작성한다.
2. 웹 서버의 IP 주소를 DNS 서버에 조회한다.
3. 전 세계의 DNS 서버가 연대한다.
4. 프로토콜 스택에 메시지 송신을 의뢰한다.
```
### HTTP 리퀘스트 메시지를 작성한다.
### 웹 서버의 IP 주소를 DNS 서버에 조회한다.
+ 브라우저는 URL을 해독하거나 HTTP 메시지를 만들지만, 메시지를 네트워크에 송출하는 기능은 없으므로 OS에 의뢰하여 송신한다.
+ 이 때, URL에 쓰여있는 서버의 도메인명에서 IP 주소를 조사해야 한다. OS에 송신을 의뢰할 때는 도메인명이 아니라 IP 주소를 지정해야 하기 때문.
+ IP 주소를 조사하는 방법은 간단하다. 가장 가까운 DNS 서버에게 질문하는 것이다. 그렇다면 브라우저는 어떻게 DNS 서버를 조회할 수 있을까?
+ 브라우저는 리졸버를 호출하게 되는데, 여기에서 DNS 서버에 문의하기 위한 메시지를 만든다. 리졸버가 프로토콜 스택을 호출하면
메시지 보내는 동작을 실행하여 LAN 어댑터를 통해 메시지가 DNS로 송신된다.
+ 웹 서버가 DNS에 등록되어 있으면 네트워크를 통해 응답이 전송되고 프로토콜 스택을 경유하여 리졸버가 응답을 받는다.
리졸버는 IP 주소를 추출하고 제어권은 웹 브라우져에게 넘어간다.

### 전 세계의 DNS 서버가 연대한다.
+ DNS 서버는, 서버에 등록된 도메인명과 IP 주소의 대응표를 조사하여 IP 주소를 회답한다.
+ 인터넷에는 막대한 수의 서버가 있으므로 전부 1대의 DNS 서버에 등록하는 것은 불가능하다. 따라서 DNS 서버에 등록되지 않은
도메인을 찾는 경우도 발생한다. 이때는 정보를 분산시켜 다수의 DNS 서버의 등록하고, 다수의 DNS 서버가 연대하여 어디에 정보가
등록되어 있는지를 찾는 구조로 동작한다.
+ 인터넷에는 DNS 서버가 수만 대나 있으므로 닥치는대로 뒤지면서 다닐수는 없다. 그래서 다음과 같은 방법을 고안했다.
하위의 도메인을 담당하는 DNS 서버의 IP 주소를 상위 DNS 서버에 등록하고, 그 상위의 DNS 서버를 또 상위의 DNS 서버에 등록한다.
+ 즉, blog.inflearn.com 이라는 도메인을 담당하는 DNS 서버를 inflearn.com DNS 서버에 등록하고, inflearn.com의
DNS 서버를 com 도메인의 DNS 서버에 등록하는 식이다. 이렇게 하면 상위의 DNS에 가면 하위의 DNS 서버의 IP 주소를 알 수 있고
거기에서 조회 메시지를 보낼 수 있다.
+ 위의 설명에서는 com, kr 을 관리하는 DNS 서버에 하위 DNS 서버를 등록하는 것으로 끝나 보이지만,com, kr 상위에 
루트 도메인이 있다. 루트 도메인에 com, kr 등의 DNS 서버를 등록한다. 이렇게 해서 루트 도메인부터 차례로 아래로 거슬러
갈 수 있다.
+ 등록 작업은 한 가지 더 있는데, 루트 도메인의 DNS 서버를 인터넷에 존재하는 DNS 서버에 전부 등록하는 것이다.
이렇게 해서 어느 DNS 서버도 루트 도메인에 접속할 수 있게 된다. 결과적으로 클라이언트에서 가까운 DNS 서버에 엑세스하면
루트도메인을 경유하여 원하는 DNS 서버에 도착하게 된다.
+ 최상위 루트 도메인에서 따라간다는 원칙대로 움직이지 않을 수 도 있는데, DNS 서버는 한 번 조사한 이름은 캐시에 기록하기 때문에,
조회한 이름에 해당하는 정보가 캐시에 있다면 그 정보를 회답한다. 이 방법이 루트도메인 부터 찾는 방법보다 편리하다. 캐쉬의 주의점은
캐쉬에 등록 후 등록정보가 변경되는 경우가 있으므로, 캐시의 유효기한을 설정하고 유효기간이 지나면 삭제한다.

### 프로토콜 스택에 메시지 송신한다.
+ 클라이언트는 소켓을 생성하고 서버측의 소켓에 파이프를 연결한다. 데이터를 송, 수신 후에 소켓을 종료한다.
+ 위 동작을 실행하는 것은 OS 내부의 프로토콜 스택이다. 브라우저 등의 애플리케이션은 자체에서 파이프를 연결하지 않고
프로토콜 스택에 의뢰하여 파이프를 연결하거나 데이터를 쏟아붇는다.
